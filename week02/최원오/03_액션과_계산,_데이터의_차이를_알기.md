## 공부 내용

- 최대한 액션에서 계산을 분리하려 한다.
- 계산에서는 최대한 데이터를 분리하려 한다.
- 계산은 충분히 구현하기 쉽다고 생각되는 지점에서 더 나누는 것을 멈춰야 한다.

### 홤수형 프로그래밍 사고

- 이메일 목록 계획하기는 불필요한 계산으로 보일 수 있다. 하지만 액션에서 계산을 분리해서 사용한 것이다.
- 액션보다 계산을 가능한 사용해야하는 이유는 테스트에 용이하기 때문이다.

### 대아터

- 이벤트에 대한 사실, 일어난 일의 결과를 기록한 것
- 데이터 구조로 의미를 담을 수 있다.
- 불변성
- 데이터 그 자체로는 할 수 있는 것이 없기때문에 좋다.
  - 직렬화된 데이터는 변함 없음이 보장 된다.
  - 동일성을 비교하기 쉽다.
  - 자유롭게 여러가지 방법으로 해석 가능하다.
- 해석이 반드시 필요하다는 단점이 있다.

### 계산

- 입력값으로 출력값을 만드는 것
- 실행시간과 횟수에 관계없이 항상 같은 입력값에 대해 같은 출력값을 반환
- 테스트가 용이하다
- 기계적인 분석이 쉽다.
- 조합하기 좋다.
- 계산은 동시 실행, 과거 및 미래의 실행 여부, 실행 횟수 등을 고려하지 않아도 된다.
- 실행 전 어떤 일이 발생할 지 알 수 없다는 단점이 있다.

### 액션

- 외부 세계에 영향을 주거나 받는 것
- 실행 시점과 횟수에 의존
- 가능한 액션을 적게 사용할 것
- 액션은 가능한 작게 만들 것
- 액션이 호출 시점에 의존하는 것을 제한한다.?

### 쿠폰독

- 이메일 보내기 = A (요청 회수)
- 데이터베이스에서 구독자 가져오기 = A (요청 시기)
- ~~쿠폰에 등급 매기기 = C (계산)~~ 정답 = D
  - 카운트 수를 기준으로 rank를 판단하는 함수로 생각, 한글을 똑바로 읽자 ㅋㅋ
- 데이터베이스에서 쿠폰 읽기 = A (요청 시기)
- 이메일 제목 = D
- 이메일 주소 = D
- 추천 수 = D
- ~~어떤 이메일이 쿠폰을 받을지 결정하기 = A (요청 회수)~~ 정답 = C
  - 이메일을 보내는 것과 분리하여 생각하지 못했다. 그러기에 한 번 쿠폰을 받은 유저는 재발급이 불가능한 비순수 함수이기에 액션으로 생각
- DB 레코드 = D
- 이메일 본문 = D

## 알게된 점

- 잘 분리한 코드라면 추상적인 개념이 변경되지 않는 한 계산은 변경되지 않아야 한다.
- 액션을 의존하는 함수는 액션이 되기 때문에 데이터와 계산에 의존하는 액션을 구현하는 것이 바람직하다.

### 참조 투명성

- 표현식을 값으로 대체해도 프로그램의 동작이 변하지 않는 성질
- 함수형 프로그래밍에서는 참조 투명성을 가진 함수를 사용함으로써 프로그램의 예측 가능성을 높이고, 디버깅을 용이하게 한다.

## 궁금한 점
